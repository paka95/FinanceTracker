{% extends "layout.html" %} 
{% block title %}Finase{% endblock %}

{% block button %}<a href="/logout" class="logout-button">LOGOUT</a> {% endblock %}

{% block content %}


<div class="main-form">


<div style="padding: 10px; display: flex; height: 100%">
    <div style="width: 60%; text-align: center; padding: 10px">
        <form method="POST" action="#">
            <div style="display: flex; width: 100%; justify-content: space-evenly;">
                <button type="submit" class="date-button" formaction="/">TODAY</button>
                <input type=date id=date_picker name="chosen_data" value="{{terazdata}}">
                <button type="submit" class="date-button">GO TO</button>
            </div>
        </form>
        

        <div style="width: 100%; height: 2px; background-color: rgb(53, 24, 75); margin-top: 10px; margin-bottom: 10px;"></div>

        <div style="height: 300px; overflow-y: auto; overflow-x: hidden; padding: 10px">
        {% for expense in expenses %}

        <button class="expense_list" type="button" data-toggle="modal" data-target="#edit{{expense.id}}"> 
            <div style="width: 10%; font-weight: bold;">{{ expense.date_created.strftime('%H:%M') }} </div>
            <div style="width: 35%; font-weight: bold;">{{ expense.name }} </div>
            <div style="width: 20%; font-weight: bold;">{{ expense.label }}</div> 
            <div style="width: 25%; font-weight: bold;">{{ expense.amount }}</div>
        </button>



        
        <!-- Update modal -->
        <div class="modal fade" id="edit{{expense.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" style="font-family: Play;" id="exampleModalLabel"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                
                

                <form method="POST" action="/change_expense/{{expense.id}}">
      
                    <div class="modal-body">
                        <div style="display: flex; justify-content: space-evenly;">
                            <input type=date style="display:none" name="chosen_data_in_form" value="{{terazdata}}">
                            <input type="text" class="update_expense_form" name="updatename" id="updatename" placeholder="{{expense.name}}" autocomplete="off">
                            
                            <select id="updatelabel" name="updatelabel" class="update_expense_form">
                                <option value="select" disabled selected>Update label</option>
                                <option value="Transport">Transport</option>
                                <option value="Bills">Bills</option>
                                <option value="Food">Food</option>
                                <option value="Misc">Misc</option>
                                <option value="Fees">Fees</option>
                            </select>
                            <input type="text" class="update_expense_form" name="updateamount" id="updateamount" placeholder="{{expense.amount}}" autocomplete="off">
                        </div>
                    </div>
                    <div style="display:flex; justify-content: space-evenly; padding: 10px">
                        <button class="update_button" type="submit" >Update</button>
                        <button class="update_button" style="background-color: red;" data-dismiss="modal" data-toggle="modal" data-target="#delete{{expense.id}}">Delete</button> 
                    </div>
                  </form>
            </div>
            </div>
        </div>


        <!-- Delete confirmation modal -->
        <div class="modal fade" id="delete{{expense.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" class="rusure" id="exampleModalLabel"><b>Are you sure you want to delete this expense?</b></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
        
                <form method="POST" action="/delete_expense/{{expense.id}}">
        
                    <input type=date style="display:none" name="chosen_data_in_form" value="{{terazdata}}">
                  <div style="display: flex; justify-content: space-evenly; padding: 10px">
                    <button class="update_button" data-dismiss="modal" >No</button>
                    <button class="update_button" style="background-color: red;" formaction="/delete_expense/{{expense.id}}">Yes</button>
                  </div>
                </form>
              </div>
            </div>
          </div>


        <div style="width: 100%; height: 1px; background-color: rgb(53, 24, 75); margin-top: 5px; margin-bottom: 5px;"></div>
        {% endfor %}
        </div>


        <div style="width: 100%; height: 2px; background-color: rgb(53, 24, 75); margin-top: 10px; margin-bottom: 10px;"></div>

        <div>
            <div style="font-size: 20px; display:flex; justify-content: space-between; padding-right: 35px; padding-left: 35px;">
                <div>daily expenses:</div>
                <div>{{ total_expenses }}</div>
            </div>
            <div style="width: 100%; height: 1px; background-color: black; margin-top: 5px; margin-bottom: 5px;"></div>
            <div style="font-size: 20px; display:flex; justify-content: space-between; padding-right: 35px; padding-left: 35px;">
                <div>monthly expenses:</div>
                <div>{{ montly_rounded }}</div>
            </div>
        </div>
    </div>

    <form style="width: 40%;" method="POST">
        {{ form.hidden_tag() }}
        <div style="padding: 20px; text-align: center; height: 320px; margin-top: 50px; ">
            <input type=date style="display:none" name="chosen_data_in_form" value="{{terazdata}}">
            {{ form.name (placeholder="Name", autocomplete="off", class="add_expense_form") }}
            <select id="labell" name="labell" class="add_expense_form">
                <option value="select" disabled selected>Select a label</option>
                <option value="Transport">Transport</option>
                <option value="Bills">Bills</option>
                <option value="Food">Food</option>
                <option value="Misc">Misc</option>
                <option value="Fees">Fees</option>
            </select>
            {{ form.amount (placeholder="Amount", autocomplete="off", class="add_expense_form") }}
            {{ form.submit (class="add_expense_button") }}
        </div>
    </form>
</div>
    
</div>


<!-- <form style="background-color: rgba(191, 191, 191, 0.5); 
width: 800px; 
height:500px; 
position: absolute;
font-family: Roboto;
top: 50%;
left: 50%;
font-weight: bold;
-ms-transform: translate(-50%, -50%);
transform: translate(-50%, -50%);
border-radius: 5px;
border-style: solid;
border-width: 1px;
border-color: rgb(182, 189, 192)" method="POST">
{{ form.hidden_tag() }}

<div style="padding: 10px; display: flex; height: 100%">
    <div style="width: 60%; text-align: center; padding: 10px">
        <div><input type=date id=e name="datah" value="{{terazdata}}"></div>

        <div style="width: 100%; height: 2px; background-color: rgb(53, 24, 75); margin-top: 10px; margin-bottom: 10px;"></div>

        <div style="height: 300px; overflow-y: auto; overflow-x: hidden; padding: 10px">
        {% for expense in expenses %}
        <div style="display: flex; justify-content: space-between;"> 
            <div style="width: 10%;">{{ expense.date_created.strftime('%H:%M') }} </div>
            <div style="width: 35%;">{{ expense.name }} </div>
            <div style="width: 20%;">{{ expense.label }}</div> 
            <div style="width: 25%;">{{ expense.amount }}</div>
        </div>
        <div style="width: 100%; height: 1px; background-color: rgb(53, 24, 75); margin-top: 5px; margin-bottom: 5px;"></div>
        {% endfor %}
        </div>

        <div style="width: 100%; height: 2px; background-color: rgb(53, 24, 75); margin-top: 10px; margin-bottom: 10px;"></div>

        <div>
            <div style="font-size: 20px; display:flex; justify-content: space-between; padding-right: 35px; padding-left: 35px;">
                <div>daily expenses:</div>
                <div>{{ total_expenses }}</div>
            </div>
            <div style="width: 100%; height: 1px; background-color: black; margin-top: 5px; margin-bottom: 5px;"></div>
            <div style="text-align: start; padding-left: 20px; font-size: 20px;">monthly expenses: {{monthly_expenses}}</div>
        </div>
    </div>

    <div style="width: 40%;  ">
        <div style="padding: 20px; text-align: center; height: 320px; margin-top: 50px; ">
            <div>{{ form.name (placeholder="Name", style="width: 100%; height: 50px; border:none; text-align: center; border-radius: 5px; background-color: #C5C5C5; margin-top:10px; margin-bottom:10px", autocomplete="off") }}</div>
            <div>{{ form.labell (placeholder="Label", style="width: 100%; height: 50px; border:none; text-align: center; border-radius: 5px; background-color: #C5C5C5; margin-top:10px; margin-bottom:10px", autocomplete="off") }}</div>
            <div>{{ form.amount (placeholder="Amount", style="width: 100%; height: 50px; border:none; text-align: center; border-radius: 5px; background-color: #C5C5C5; margin-top:10px; margin-bottom:10px", autocomplete="off") }}</div>
            <div>{{ form.submit (class="logout-button", style="margin: auto; width: 100%; height: 50px; margin-top: 10px") }}</div>
        </div>
    </div>
</div>
    
</form> -->






<script>
    // document.getElementById('e').value = new Date().toISOString().substring(0, 10);
    // function mouseUp() {
    // document.getElementById("goto").click();
    // }
    // var data = new Date().toISOString().substring(0, 10);
    // var time = new Date().toISOString().substring(11, 19);
    // document.getElementById("heh").innerHTML = new Date().toISOString().substring(11, 19);
    // document.getElementById("heh").innerHTML = data + " " + time;
    // function MyFunction() {
    //     var x = document.getElementById('e').valueAsDate;
    //     lista2 = document.getElementById("lista2")
    //     lista2.innerHTML += "<div>" + x + "</div>"
    //}
</script>


{% endblock %}  